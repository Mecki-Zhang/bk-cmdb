webpackJsonp([9],{"2Uul":function(t,e,i){e=t.exports=i("UTlt")(!0),e.push([t.i,".host-resource-wrapper[data-v-5c10d686]{height:100%}.biz-selector[data-v-5c10d686]{display:inline-block;vertical-align:middle;width:200px}.del-button[data-v-5c10d686]{width:36px;padding:0}.del-button:hover .icon-cc-del[data-v-5c10d686]{color:#ef4c4c}.automatic-import[data-v-5c10d686]{padding:40px 30px 0}.automatic-import .back-contain[data-v-5c10d686]{margin-left:45px;cursor:pointer}.automatic-import .back-contain img[data-v-5c10d686]{margin-right:5px}.automatic-import .back-contain a[data-v-5c10d686]{color:#498fe0}","",{version:3,sources:["/data/bk-cmdb/src/configcenter/src/ui/src/pages/resource/resource.vue"],names:[],mappings:"AAoBA,wCACE,WAAa,CACd,AACD,+BACE,qBAAsB,AACtB,sBAAuB,AACvB,WAAa,CACd,AACD,6BACE,WAAY,AACZ,SAAW,CACZ,AACD,gDACI,aAAe,CAClB,AACD,mCACE,mBAA0B,CAC3B,AACD,iDACI,iBAAkB,AAClB,cAAgB,CACnB,AACD,qDACM,gBAAkB,CACvB,AACD,mDACM,aAAe,CACpB",file:"resource.vue",sourcesContent:['\n@charset "UTF-8";\n/*\r\n * Tencent is pleased to support the open source community by making 蓝鲸 available.\r\n * Copyright (C) 2017-2018 THL A29 Limited, a Tencent company. All rights reserved.\r\n * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at http://opensource.org/licenses/MIT\r\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and limitations under the License.\r\n */\n/*\r\n * Tencent is pleased to support the open source community by making 蓝鲸 available.\r\n * Copyright (C) 2017-2018 THL A29 Limited, a Tencent company. All rights reserved.\r\n * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at http://opensource.org/licenses/MIT\r\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and limitations under the License.\r\n */\n.host-resource-wrapper[data-v-5c10d686] {\n  height: 100%;\n}\n.biz-selector[data-v-5c10d686] {\n  display: inline-block;\n  vertical-align: middle;\n  width: 200px;\n}\n.del-button[data-v-5c10d686] {\n  width: 36px;\n  padding: 0;\n}\n.del-button:hover .icon-cc-del[data-v-5c10d686] {\n    color: #ef4c4c;\n}\n.automatic-import[data-v-5c10d686] {\n  padding: 40px 30px 0 30px;\n}\n.automatic-import .back-contain[data-v-5c10d686] {\n    margin-left: 45px;\n    cursor: pointer;\n}\n.automatic-import .back-contain img[data-v-5c10d686] {\n      margin-right: 5px;\n}\n.automatic-import .back-contain a[data-v-5c10d686] {\n      color: #498fe0;\n}\n'],sourceRoot:""}])},"9xij":function(t,e,i){"use strict";var n=i("aA9S"),s=i.n(n),o=i("3cXf"),a=i.n(o),r=i("4YfN"),c=i.n(r),d=i("Qt9A"),l=i("T0tT"),p=i("d0Hl"),u=i("9rMa");e.a={data:function(){return{index:{bkBizId:"",selectedHost:[],searchParams:{bk_biz_id:-1,condition:[{bk_obj_id:"biz",fields:[],condition:[{field:"default",operator:"$eq",value:1}]},{bk_obj_id:"host",fields:[],condition:[]},{bk_obj_id:"module",fields:[],condition:[]},{bk_obj_id:"set",fields:[],condition:[]}]}},slider:{title:{text:"导入主机",icon:"icon-cc-import"},isShow:!1,tab:{active:"import"},import:{templateUrl:window.siteUrl+"importtemplate/host",importUrl:window.siteUrl+"hosts/import"}},isShowimportHost:!1}},computed:c()({},Object(u.c)(["bkBizList","bkSupplierAccount"]),{hasSelectedHost:function(){return this.index.selectedHost.length},exportUrl:function(){return window.siteUrl+"hosts/export"}}),watch:{"slider.isShow":function(t){t||(this.slider.tab.active="import")}},methods:c()({},Object(u.b)(["getBkBizList"]),{tabChanged:function(t){this.slider.tab.active=t},confirmTransfer:function(t,e){var i=this,n=this.$createElement;this.$bkInfo({title:"请确认是否转移",content:n("p",[n("span","选中的 "),n("span",{style:{color:"#498fe0"}},this.index.selectedHost.length),n("span"," 个主机转移到 "),n("span",{style:{color:"#498fe0"}},t.label),n("span"," 下的空闲机模块")]),confirmFn:function(){i.transferHost()}})},transferHost:function(){var t=this;this.$axios.post("hosts/modules/resource/idle",{bk_biz_id:this.index.bkBizId,bk_host_id:this.index.selectedHost}).then(function(e){e.result?(t.$alertMsg("分配成功","success"),t.index.selectedHost=[],t.$refs.index.transferSuccess(),t.index.bkBizId="",t.search()):t.$alertMsg(e.bk_error_msg)})},confirmDel:function(){var t=this;this.$bkInfo({title:"确定删除选中的主机？",confirmFn:function(){t.$axios.delete("hosts/batch",{data:a()({bk_host_id:t.index.selectedHost.join(","),bk_supplier_account:t.bkSupplierAccount})}).then(function(e){e.result?(t.$bkInfo({statusOpts:{title:"成功删除选中的主机",subtitle:!1},type:"success"}),t.search(),t.$refs.index.clearChooseId()):t.$alertMsg(e.bk_error_msg)})}})},search:function(){this.index.searchParams=s()({},this.index.searchParams)},setSelectedHost:function(t){this.index.selectedHost=t},exportChoose:function(){this.$refs.exportForm.submit()},importHostShow:function(){this.slider.isShow=!0},openAgentApp:function(){var t=window.agentAppUrl;t?-1!==window.agentAppUrl.indexOf("paasee-g.o.qcloud.com")?window.top.postMessage(a()({action:"open_other_app",app_code:"bk_agent_setup"}),"*"):window.open(t):this.$alertMsg("未配置Agent安装APP地址")}}),created:function(){this.bkBizList.length||this.getBkBizList()},components:{vImport:l.a,vIndex:d.default,vSideslider:p.a}}},EF8o:function(t,e,i){"use strict";function n(t){i("ddb3")}Object.defineProperty(e,"__esModule",{value:!0});var s=i("9xij"),o=i("eBno"),a=i("Z0/y"),r=n,c=a(s.a,o.a,!1,r,"data-v-5c10d686",null);e.default=c.exports},ddb3:function(t,e,i){var n=i("2Uul");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("FIqI")("339e4d8a",n,!0,{})},eBno:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"host-resource-wrapper"},[i("v-index",{ref:"index",attrs:{isShowBiz:!1,isShowCollect:!1,isShowHistory:!1,outerParams:t.index.searchParams},on:{choose:t.setSelectedHost,attrLoaded:t.search}},[i("div",{staticClass:"button-contain clearfix",attrs:{slot:"btnGroup"},slot:"btnGroup"},[i("bk-select",{staticClass:"biz-selector fl mr10",attrs:{placeholder:"分配到业务空闲机池",disabled:!t.hasSelectedHost,selected:t.index.bkBizId,filterable:!0},on:{"update:selected":function(e){t.$set(t.index,"bkBizId",e)},"on-selected":t.confirmTransfer}},t._l(t.bkBizList,function(t,e){return i("bk-select-option",{key:e,attrs:{value:t.bk_biz_id,label:t.bk_biz_name}})})),t._v(" "),i("form",{ref:"exportForm",staticClass:"fl mr10",attrs:{action:t.exportUrl,method:"POST"}},[i("input",{attrs:{type:"hidden",name:"bk_host_id"},domProps:{value:t.index.selectedHost}}),t._v(" "),i("input",{attrs:{type:"hidden",name:"bk_biz_id",value:"-1"}}),t._v(" "),i("button",{staticClass:"bk-button",attrs:{disabled:!t.hasSelectedHost},on:{click:function(e){return e.preventDefault(),t.exportChoose(e)}}},[i("i",{staticClass:"icon-cc-derivation"}),t._v(" "),i("span",[t._v("导出选中")])])]),t._v(" "),i("button",{staticClass:"bk-button del-button fl mr10",attrs:{disabled:!t.hasSelectedHost},on:{click:t.confirmDel}},[i("i",{staticClass:"icon-cc-del"})]),t._v(" "),i("bk-button",{staticClass:"fl",attrs:{type:"primary"},on:{click:t.importHostShow}},[t._v("导入主机")])],1)]),t._v(" "),i("v-sideslider",{attrs:{title:t.slider.title,isShow:t.slider.isShow},on:{"update:isShow":function(e){t.$set(t.slider,"isShow",e)}}},[i("bk-tab",{staticStyle:{border:"none",padding:"0 20px"},attrs:{slot:"content","active-name":t.slider.tab.active},on:{"tab-changed":t.tabChanged},slot:"content"},[i("bk-tabpanel",{attrs:{name:"import",title:"批量导入"}},[i("v-import",{attrs:{templateUrl:t.slider.import.templateUrl,importUrl:t.slider.import.importUrl},on:{success:function(e){t.search()},partialSuccess:function(e){t.search()}}},[i("span",{staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{slot:"download-desc"},slot:"download-desc"},[t._v("说明：内网IP为必填列；")])])],1)],1)],1)],1)},s=[],o={render:n,staticRenderFns:s};e.a=o}});
//# sourceMappingURL=9.c4a38795498d546d9622.js.map